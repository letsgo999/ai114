<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 코칭 웹앱 개발 종합 지침서</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @media print {
            .no-print { display: none !important; }
            .page-break { page-break-before: always; }
            body { font-size: 11pt; }
            h1 { font-size: 24pt; }
            h2 { font-size: 18pt; page-break-before: always; }
            h3 { font-size: 14pt; }
            h4 { font-size: 12pt; }
            pre { font-size: 9pt; white-space: pre-wrap; }
            table { font-size: 10pt; }
            .print-friendly { background: white !important; }
        }
        
        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
        }
        
        code {
            background: #f1f5f9;
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.875em;
        }
        
        pre code {
            background: transparent;
            padding: 0;
        }
        
        .toc a {
            text-decoration: none;
            color: #4f46e5;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
        
        .checklist li {
            list-style: none;
            padding-left: 1.5rem;
            position: relative;
        }
        
        .checklist li::before {
            content: "☐";
            position: absolute;
            left: 0;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
        }
        
        th, td {
            border: 1px solid #e2e8f0;
            padding: 0.5rem 0.75rem;
            text-align: left;
        }
        
        th {
            background: #f8fafc;
            font-weight: 600;
        }
        
        .warning-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .info-box {
            background: #dbeafe;
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            margin: 1rem 0;
        }
    </style>
</head>
<body class="bg-gray-50 print-friendly">
    <!-- 다운로드 버튼 -->
    <div class="no-print fixed top-4 right-4 z-50 flex gap-2">
        <button onclick="window.print()" class="px-6 py-3 bg-purple-600 text-white rounded-lg shadow-lg hover:bg-purple-700 transition flex items-center gap-2">
            <i class="fas fa-file-pdf"></i>
            PDF 다운로드
        </button>
        <a href="/coach" class="px-6 py-3 bg-gray-600 text-white rounded-lg shadow-lg hover:bg-gray-700 transition flex items-center gap-2">
            <i class="fas fa-arrow-left"></i>
            돌아가기
        </a>
    </div>

    <div class="max-w-4xl mx-auto p-8 bg-white shadow-lg my-8">
        <!-- 표지 -->
        <div class="text-center py-16 border-b-4 border-purple-600 mb-12">
            <div class="mb-8">
                <i class="fas fa-robot text-purple-600 text-6xl"></i>
            </div>
            <h1 class="text-4xl font-bold text-gray-800 mb-4">AI 코칭 웹앱</h1>
            <h2 class="text-2xl font-semibold text-purple-600 mb-8">개발 종합 지침서</h2>
            <p class="text-gray-500 mb-4">버전 1.0 | 2026-01-18</p>
            <p class="text-gray-600">AI공부방 10기 교육용</p>
        </div>

        <!-- 목차 -->
        <div class="toc mb-12 p-6 bg-gray-50 rounded-xl">
            <h2 class="text-xl font-bold text-gray-800 mb-4"><i class="fas fa-list mr-2 text-purple-600"></i>목차</h2>
            <ol class="space-y-2 text-gray-700">
                <li><a href="#section-1">1. 프로젝트 개요</a></li>
                <li><a href="#section-2">2. 개발 전 준비 체크리스트</a></li>
                <li><a href="#section-3">3. 기술 스택 및 아키텍처</a></li>
                <li><a href="#section-4">4. 데이터베이스 설계</a></li>
                <li><a href="#section-5">5. API 설계</a></li>
                <li><a href="#section-6">6. UI/UX 설계</a></li>
                <li><a href="#section-7">7. 단계별 개발 프로세스</a></li>
                <li><a href="#section-8">8. 배포 프로세스</a></li>
                <li><a href="#section-9">9. 테스트 체크리스트</a></li>
                <li><a href="#section-10">10. 트러블슈팅 가이드</a></li>
                <li><a href="#section-11">11. 유지보수 가이드</a></li>
                <li><a href="#section-12">부록: 코드 스니펫</a></li>
            </ol>
        </div>

        <!-- 섹션 1: 프로젝트 개요 -->
        <section id="section-1" class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 pb-2 border-b-2 border-purple-600">
                <i class="fas fa-info-circle mr-2 text-purple-600"></i>1. 프로젝트 개요
            </h2>
            
            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">1.1 앱 목적</h3>
            <ul class="list-disc list-inside space-y-2 text-gray-600 ml-4">
                <li>수강생 업무 입력 → AI 분석 → 맞춤형 도구 추천 및 워크플로우 코칭 제공</li>
                <li>관리자(코치) 대시보드를 통한 수강생 관리 및 코멘트 작성</li>
            </ul>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">1.2 주요 기능</h3>
            <table class="mb-6">
                <thead>
                    <tr>
                        <th>구분</th>
                        <th>기능</th>
                        <th>설명</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>수강생</td><td>업무 입력</td><td>폼을 통한 업무 정보 제출</td></tr>
                    <tr><td>수강생</td><td>분석 보고서</td><td>AI 추천 도구 및 워크플로우 확인</td></tr>
                    <tr><td>수강생</td><td>PDF 다운로드</td><td>보고서 PDF 저장</td></tr>
                    <tr><td>관리자</td><td>대시보드</td><td>전체 수강생 업무 목록 및 통계</td></tr>
                    <tr><td>관리자</td><td>코멘트 작성</td><td>AI 코칭 내용 기반 코멘트</td></tr>
                    <tr><td>관리자</td><td>휴지통 관리</td><td>소프트 삭제 및 복원</td></tr>
                    <tr><td>관리자</td><td>CSV 내보내기/가져오기</td><td>대량 데이터 관리</td></tr>
                    <tr><td>시스템</td><td>이메일 알림</td><td>Gmail 연동 보고서/코멘트 발송</td></tr>
                </tbody>
            </table>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">1.3 사용자 역할</h3>
            <ul class="list-disc list-inside space-y-2 text-gray-600 ml-4">
                <li><strong>수강생</strong>: 업무 입력, 보고서 확인</li>
                <li><strong>코치(관리자)</strong>: 전체 관리, 코멘트 작성, 통계 확인</li>
            </ul>
        </section>

        <!-- 섹션 2: 개발 전 준비 체크리스트 -->
        <section id="section-2" class="mb-12 page-break">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 pb-2 border-b-2 border-purple-600">
                <i class="fas fa-clipboard-check mr-2 text-purple-600"></i>2. 개발 전 준비 체크리스트
            </h2>

            <div class="warning-box">
                <strong><i class="fas fa-exclamation-triangle mr-2"></i>중요!</strong>
                <p class="mt-2">개발 시작 전 아래 항목들을 반드시 확인하세요. 누락 시 개발 중 반복 수정 작업이 발생합니다.</p>
            </div>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">2.1 필수 확인 사항</h3>
            
            <h4 class="font-semibold text-gray-600 mt-4 mb-2">API 키 및 인증</h4>
            <ul class="checklist space-y-1 text-gray-600 ml-4">
                <li>Cloudflare API 토큰 준비 (또는 발급 방법 안내)</li>
                <li>Gemini API 키 준비 (또는 발급 방법 안내)</li>
                <li>GitHub 연동 설정 확인 (선택사항)</li>
            </ul>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">데이터베이스 설계 확정</h4>
            <ul class="checklist space-y-1 text-gray-600 ml-4">
                <li>모든 테이블 스키마 확정</li>
                <li><strong class="text-red-600">소프트 삭제(deleted_at) 컬럼 포함 여부 결정</strong></li>
                <li>인덱스 설계 완료</li>
                <li>시드 데이터 준비</li>
            </ul>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">UI/UX 요구사항 확정</h4>
            <ul class="checklist space-y-1 text-gray-600 ml-4">
                <li>모든 페이지 목록 확정</li>
                <li>각 페이지별 기능 목록 확정</li>
                <li><strong class="text-red-600">버튼/아이콘 디자인 명세 (텍스트 포함 여부, 색상, 크기)</strong></li>
                <li>모달/팝업 디자인 확정</li>
                <li>반응형 레이아웃 기준점 확정</li>
            </ul>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">기능 요구사항 확정</h4>
            <ul class="checklist space-y-1 text-gray-600 ml-4">
                <li>CRUD 기능 전체 목록</li>
                <li><strong class="text-red-600">삭제 방식 결정 (소프트 삭제 vs 하드 삭제)</strong></li>
                <li>필터링/검색 기능 범위</li>
                <li>통계 항목 목록</li>
                <li>내보내기/가져오기 형식</li>
            </ul>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">2.2 기술적 준비사항</h3>
            
            <h4 class="font-semibold text-gray-600 mt-4 mb-2">Cloudflare 서비스</h4>
            <ul class="checklist space-y-1 text-gray-600 ml-4">
                <li>D1 Database 생성 및 ID 확인</li>
                <li>Pages 프로젝트 생성</li>
                <li>환경 변수 설정 (API 키 등)</li>
                <li>커스텀 도메인 설정 (선택)</li>
            </ul>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">개발 환경</h4>
            <ul class="checklist space-y-1 text-gray-600 ml-4">
                <li>Node.js 18+ 설치</li>
                <li>Wrangler CLI 설치 및 인증</li>
                <li>Git 초기화</li>
                <li>.gitignore 설정</li>
            </ul>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">2.3 설계 문서 준비</h3>
            <p class="text-gray-600 mb-2">다음 문서들을 사전에 준비하세요:</p>
            <ol class="list-decimal list-inside space-y-1 text-gray-600 ml-4">
                <li><strong>데이터베이스 ERD</strong> - 테이블 관계도</li>
                <li><strong>API 명세서</strong> - 모든 엔드포인트 목록</li>
                <li><strong>화면 설계서</strong> - 각 페이지 와이어프레임</li>
                <li><strong>기능 명세서</strong> - 상세 기능 설명</li>
            </ol>
        </section>

        <!-- 섹션 3: 기술 스택 -->
        <section id="section-3" class="mb-12 page-break">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 pb-2 border-b-2 border-purple-600">
                <i class="fas fa-layer-group mr-2 text-purple-600"></i>3. 기술 스택 및 아키텍처
            </h2>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">3.1 기술 스택</h3>
            <table class="mb-6">
                <thead>
                    <tr><th>계층</th><th>기술</th><th>버전/비고</th></tr>
                </thead>
                <tbody>
                    <tr><td>프레임워크</td><td>Hono</td><td>^4.0.0</td></tr>
                    <tr><td>런타임</td><td>Cloudflare Workers</td><td>Edge Runtime</td></tr>
                    <tr><td>데이터베이스</td><td>Cloudflare D1</td><td>SQLite 기반</td></tr>
                    <tr><td>빌드 도구</td><td>Vite</td><td>^5.0.0</td></tr>
                    <tr><td>언어</td><td>TypeScript</td><td>^5.0.0</td></tr>
                    <tr><td>스타일링</td><td>Tailwind CSS</td><td>CDN 방식</td></tr>
                    <tr><td>아이콘</td><td>FontAwesome</td><td>CDN 방식</td></tr>
                    <tr><td>AI</td><td>Google Gemini API</td><td>gemini-2.5-flash</td></tr>
                </tbody>
            </table>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">3.2 프로젝트 구조</h3>
            <pre>webapp/
├── src/
│   ├── index.tsx          # 메인 앱 (라우트 + HTML 렌더링)
│   └── lib/
│       ├── types.ts       # TypeScript 타입 정의
│       ├── recommendation.ts  # 추천 로직
│       └── gemini.ts      # AI API 연동
├── public/
│   └── static/            # 정적 파일
├── migrations/
│   ├── 0001_initial_schema.sql
│   └── 0002_add_deleted_at.sql
├── wrangler.jsonc         # Cloudflare 설정
├── vite.config.ts         # Vite 설정
├── package.json
├── tsconfig.json
└── ecosystem.config.cjs   # PM2 설정 (로컬 개발용)</pre>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">3.3 아키텍처 다이어그램</h3>
            <pre>┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   Browser   │────▶│  Cloudflare │────▶│  D1 Database│
│  (Client)   │     │   Workers   │     │   (SQLite)  │
└─────────────┘     └──────┬──────┘     └─────────────┘
                          │
                          ▼
                   ┌─────────────┐
                   │  Gemini API │
                   │   (Google)  │
                   └─────────────┘</pre>
        </section>

        <!-- 섹션 4: 데이터베이스 설계 -->
        <section id="section-4" class="mb-12 page-break">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 pb-2 border-b-2 border-purple-600">
                <i class="fas fa-database mr-2 text-purple-600"></i>4. 데이터베이스 설계
            </h2>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">4.1 테이블 스키마</h3>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">tasks 테이블 (업무)</h4>
            <pre>CREATE TABLE tasks (
    id TEXT PRIMARY KEY,
    organization TEXT NOT NULL,        -- 소속/조직
    department TEXT NOT NULL,          -- 부서
    name TEXT NOT NULL,                -- 이름
    job_description TEXT NOT NULL,     -- 업무 설명
    repeat_cycle TEXT NOT NULL,        -- 반복 주기
    automation_request TEXT NOT NULL,  -- 자동화 요청사항
    email TEXT NOT NULL,               -- 이메일
    current_tools TEXT,                -- 현재 사용 도구
    estimated_hours REAL DEFAULT 1,    -- 예상 소요시간 (기본 1시간)
    recommended_tools TEXT,            -- AI 추천 결과 (JSON)
    task_category TEXT,                -- 업무 카테고리
    automation_level TEXT,             -- 자동화 수준 (full/semi/assist)
    status TEXT DEFAULT 'pending',     -- 상태
    coach_comment_status TEXT DEFAULT 'none',  -- 코멘트 상태
    deleted_at INTEGER DEFAULT NULL,   -- ⚠️ 소프트 삭제용 (필수!)
    created_at INTEGER NOT NULL,
    updated_at INTEGER NOT NULL
);

-- 인덱스
CREATE INDEX idx_tasks_deleted_at ON tasks(deleted_at);
CREATE INDEX idx_tasks_email ON tasks(email);
CREATE INDEX idx_tasks_status ON tasks(status);</pre>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">comments 테이블 (코치 코멘트)</h4>
            <pre>CREATE TABLE comments (
    id TEXT PRIMARY KEY,
    task_id TEXT NOT NULL,
    additional_tools TEXT,
    tool_explanation TEXT,
    tips TEXT,
    learning_priority TEXT,
    general_comment TEXT,
    status TEXT DEFAULT 'draft',       -- draft/published
    coach_name TEXT DEFAULT '디마불사',
    created_at INTEGER NOT NULL,
    updated_at INTEGER NOT NULL,
    FOREIGN KEY (task_id) REFERENCES tasks(id) ON DELETE CASCADE
);</pre>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">ai_tools 테이블 (AI 도구 마스터)</h4>
            <pre>CREATE TABLE ai_tools (
    id TEXT PRIMARY KEY,
    name TEXT NOT NULL UNIQUE,
    category TEXT NOT NULL,
    subcategory TEXT,
    description TEXT NOT NULL,
    website_url TEXT,
    use_cases TEXT NOT NULL,
    keywords TEXT NOT NULL,
    automation_level TEXT NOT NULL,    -- full/semi/assist
    difficulty TEXT NOT NULL,          -- beginner/intermediate/advanced
    pricing_type TEXT NOT NULL,        -- free/freemium/paid
    pricing_detail TEXT,
    rating REAL DEFAULT 4.0,
    popularity INTEGER DEFAULT 50,
    is_active INTEGER DEFAULT 1,
    created_at INTEGER NOT NULL,
    updated_at INTEGER NOT NULL
);</pre>

            <div class="warning-box">
                <strong><i class="fas fa-exclamation-triangle mr-2"></i>설계 원칙 - 필수!</strong>
                <p class="mt-2"><strong>소프트 삭제 필수 적용:</strong> 모든 주요 테이블에 <code>deleted_at</code> 컬럼을 추가하세요.</p>
                <pre class="mt-2">ALTER TABLE {table_name} ADD COLUMN deleted_at INTEGER DEFAULT NULL;
CREATE INDEX idx_{table_name}_deleted_at ON {table_name}(deleted_at);</pre>
                <p class="mt-2"><strong>모든 조회 쿼리에 삭제 필터 적용:</strong></p>
                <pre class="mt-2">-- ❌ 잘못된 예
SELECT * FROM tasks ORDER BY created_at DESC;

-- ✅ 올바른 예
SELECT * FROM tasks WHERE deleted_at IS NULL ORDER BY created_at DESC;</pre>
            </div>
        </section>

        <!-- 섹션 5: API 설계 -->
        <section id="section-5" class="mb-12 page-break">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 pb-2 border-b-2 border-purple-600">
                <i class="fas fa-plug mr-2 text-purple-600"></i>5. API 설계
            </h2>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">5.1 API 엔드포인트 전체 목록</h3>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">공개 API (인증 불필요)</h4>
            <table class="mb-4">
                <thead><tr><th>메서드</th><th>경로</th><th>설명</th></tr></thead>
                <tbody>
                    <tr><td>GET</td><td><code>/api/tools</code></td><td>AI 도구 목록 조회</td></tr>
                    <tr><td>GET</td><td><code>/api/tools/categories</code></td><td>카테고리별 통계</td></tr>
                    <tr><td>POST</td><td><code>/api/tasks</code></td><td>업무 등록 + AI 분석</td></tr>
                    <tr><td>GET</td><td><code>/api/tasks/:id</code></td><td>특정 업무 조회</td></tr>
                    <tr><td>GET</td><td><code>/api/tasks?email=xxx</code></td><td>이메일별 업무 조회</td></tr>
                    <tr><td>GET</td><td><code>/api/history/:email</code></td><td>수강생 이력 조회</td></tr>
                </tbody>
            </table>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">관리자 API (비밀번호 인증)</h4>
            <table class="mb-4">
                <thead><tr><th>메서드</th><th>경로</th><th>설명</th></tr></thead>
                <tbody>
                    <tr><td>POST</td><td><code>/api/admin/login</code></td><td>관리자 로그인</td></tr>
                    <tr><td>GET</td><td><code>/api/admin/tasks</code></td><td>전체 업무 목록</td></tr>
                    <tr><td>GET</td><td><code>/api/admin/stats</code></td><td>통계 데이터</td></tr>
                    <tr><td>POST</td><td><code>/api/admin/comments</code></td><td>코멘트 저장</td></tr>
                    <tr><td>GET</td><td><code>/api/admin/trash</code></td><td>휴지통 목록</td></tr>
                    <tr><td>POST</td><td><code>/api/admin/trash/cleanup</code></td><td>30일 지난 항목 정리</td></tr>
                </tbody>
            </table>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">CRUD API (⚠️ 삭제 기능 필수)</h4>
            <table class="mb-4">
                <thead><tr><th>메서드</th><th>경로</th><th>설명</th></tr></thead>
                <tbody>
                    <tr class="bg-red-50"><td>DELETE</td><td><code>/api/tasks/:id</code></td><td>소프트 삭제 (휴지통 이동)</td></tr>
                    <tr class="bg-green-50"><td>POST</td><td><code>/api/tasks/:id/restore</code></td><td>휴지통에서 복원</td></tr>
                    <tr class="bg-red-50"><td>DELETE</td><td><code>/api/tasks/:id/permanent</code></td><td>영구 삭제</td></tr>
                </tbody>
            </table>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">유틸리티 API</h4>
            <table class="mb-4">
                <thead><tr><th>메서드</th><th>경로</th><th>설명</th></tr></thead>
                <tbody>
                    <tr><td>GET</td><td><code>/api/export/tasks</code></td><td>CSV 내보내기</td></tr>
                    <tr><td>POST</td><td><code>/api/import/tasks</code></td><td>CSV 가져오기</td></tr>
                    <tr><td>POST</td><td><code>/api/email/compose</code></td><td>Gmail 작성 URL 생성</td></tr>
                    <tr><td>GET</td><td><code>/api/init</code></td><td>DB 초기화 (개발용)</td></tr>
                </tbody>
            </table>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">5.2 API 응답 형식</h3>
            <pre>// 성공 응답
{
  success: true,
  data: { ... }
}

// 실패 응답
{
  success: false,
  error: "에러 메시지"
}</pre>
        </section>

        <!-- 섹션 6: UI/UX 설계 -->
        <section id="section-6" class="mb-12 page-break">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 pb-2 border-b-2 border-purple-600">
                <i class="fas fa-palette mr-2 text-purple-600"></i>6. UI/UX 설계
            </h2>

            <div class="warning-box">
                <strong><i class="fas fa-exclamation-triangle mr-2"></i>핵심 원칙!</strong>
                <p class="mt-2">이 프로젝트에서 발생한 주요 문제는 <strong>아이콘만 있는 버튼</strong>이었습니다. 
                반드시 모든 버튼에 <strong>텍스트 레이블</strong>을 포함하세요!</p>
            </div>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">6.1 버튼 디자인 가이드</h3>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">버튼 스타일 표준</h4>
            
            <div class="space-y-4 mb-6">
                <div class="flex items-center gap-4">
                    <button class="px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200">
                        <i class="fas fa-eye mr-1"></i>보기
                    </button>
                    <span class="text-gray-600">기본 버튼 (회색)</span>
                </div>
                <div class="flex items-center gap-4">
                    <button class="px-3 py-1 text-sm bg-purple-600 text-white rounded hover:bg-purple-700">
                        <i class="fas fa-comment mr-1"></i>코멘트
                    </button>
                    <span class="text-gray-600">주요 액션 버튼 (보라색)</span>
                </div>
                <div class="flex items-center gap-4">
                    <button class="px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200">
                        <i class="fas fa-envelope mr-1"></i>메일
                    </button>
                    <span class="text-gray-600">보조 버튼 (파란색)</span>
                </div>
                <div class="flex items-center gap-4">
                    <button class="px-3 py-1 text-sm bg-green-100 text-green-600 rounded hover:bg-green-200">
                        <i class="fas fa-check mr-1"></i>완료
                    </button>
                    <span class="text-gray-600">성공/완료 버튼 (초록색)</span>
                </div>
                <div class="flex items-center gap-4">
                    <button class="px-3 py-1 text-sm bg-red-100 text-red-600 rounded hover:bg-red-200">
                        <i class="fas fa-trash-alt mr-1"></i>삭제
                    </button>
                    <span class="text-gray-600"><strong>⚠️ 삭제 버튼 (빨간색) - 반드시 텍스트 포함!</strong></span>
                </div>
            </div>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">버튼 설계 원칙</h4>
            <ol class="list-decimal list-inside space-y-2 text-gray-600 ml-4">
                <li><strong class="text-red-600">아이콘만 사용하지 않기</strong> - 반드시 텍스트 레이블 포함</li>
                <li><strong>일관된 크기</strong> - <code>px-3 py-1 text-sm</code> 통일</li>
                <li><strong>색상 코드화</strong> - 액션별 색상 구분</li>
                <li><strong>hover 효과</strong> - 모든 버튼에 hover 스타일 적용</li>
            </ol>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">6.2 HTML 코드 예시</h3>
            <pre>&lt;!-- ❌ 잘못된 예 - 아이콘만 있음 --&gt;
&lt;button&gt;&lt;i class="fas fa-trash"&gt;&lt;/i&gt;&lt;/button&gt;

&lt;!-- ✅ 올바른 예 - 텍스트 포함 --&gt;
&lt;button class="px-3 py-1 text-sm bg-red-100 text-red-600 rounded hover:bg-red-200"&gt;
  &lt;i class="fas fa-trash-alt mr-1"&gt;&lt;/i&gt;삭제
&lt;/button&gt;</pre>
        </section>

        <!-- 섹션 7: 단계별 개발 프로세스 -->
        <section id="section-7" class="mb-12 page-break">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 pb-2 border-b-2 border-purple-600">
                <i class="fas fa-tasks mr-2 text-purple-600"></i>7. 단계별 개발 프로세스
            </h2>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">Phase 1: 프로젝트 초기화 (30분)</h3>
            
            <h4 class="font-semibold text-gray-600 mt-4 mb-2">Step 1.1: Hono 프로젝트 생성</h4>
            <pre>cd /home/user
npm create -y hono@latest webapp -- --template cloudflare-pages --install --pm npm
cd webapp</pre>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">Step 1.2: Git 초기화</h4>
            <pre>git init
cat > .gitignore << 'EOF'
node_modules/
dist/
.wrangler/
.dev.vars
*.log
EOF
git add .
git commit -m "Initial commit"</pre>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">Step 1.3: wrangler.jsonc 설정</h4>
            <pre>{
  "$schema": "node_modules/wrangler/config-schema.json",
  "name": "app-name",
  "compatibility_date": "2024-01-01",
  "pages_build_output_dir": "./dist",
  "compatibility_flags": ["nodejs_compat"],
  "d1_databases": [
    {
      "binding": "DB",
      "database_name": "app-db",
      "database_id": "your-database-id"
    }
  ]
}</pre>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">Phase 2: 데이터베이스 설정 (30분)</h3>
            <pre># D1 데이터베이스 생성
npx wrangler d1 create app-db

# 마이그레이션 디렉토리 생성
mkdir migrations

# 마이그레이션 실행 (로컬)
npx wrangler d1 migrations apply app-db --local

# 마이그레이션 실행 (프로덕션)
npx wrangler d1 migrations apply app-db --remote</pre>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">Phase 3: 백엔드 개발 (2-3시간)</h3>
            <p class="text-gray-600 mb-2">구현 순서:</p>
            <ol class="list-decimal list-inside space-y-1 text-gray-600 ml-4">
                <li>타입 정의 (src/lib/types.ts)</li>
                <li>유틸리티 함수 (generateId, formatDate)</li>
                <li>DB 초기화 함수</li>
                <li>공개 API 라우트</li>
                <li>관리자 API 라우트</li>
                <li><strong class="text-red-600">CRUD API 라우트 (삭제/복원 포함)</strong></li>
                <li><strong class="text-red-600">휴지통 API 라우트</strong></li>
                <li>AI 연동 (Gemini API)</li>
            </ol>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">Phase 4: 프론트엔드 개발 (2-3시간)</h3>
            <p class="text-gray-600 mb-2">구현 순서:</p>
            <ol class="list-decimal list-inside space-y-1 text-gray-600 ml-4">
                <li>페이지별 HTML 렌더링 함수</li>
                <li>폼 제출 및 유효성 검사</li>
                <li>API 호출 및 데이터 렌더링</li>
                <li>모달 열기/닫기</li>
                <li>필터링 및 검색</li>
                <li><strong class="text-red-600">삭제/복원 기능 (⚠️ 누락 주의)</strong></li>
                <li>차트 및 통계 (Chart.js)</li>
            </ol>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">Phase 5-6: 테스트 및 배포</h3>
            <pre># 로컬 테스트
npm run build
pm2 start ecosystem.config.cjs
curl http://localhost:3000/api/init

# 배포
npx wrangler pages deploy dist --project-name app-name

# 프로덕션 DB 초기화
npx wrangler d1 execute app-db --remote --file=./seed_tools.sql</pre>
        </section>

        <!-- 섹션 8: 배포 프로세스 -->
        <section id="section-8" class="mb-12 page-break">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 pb-2 border-b-2 border-purple-600">
                <i class="fas fa-rocket mr-2 text-purple-600"></i>8. 배포 프로세스
            </h2>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">8.1 첫 배포 체크리스트</h3>
            <ul class="checklist space-y-1 text-gray-600 ml-4">
                <li>Cloudflare API 키 설정 완료</li>
                <li>D1 데이터베이스 생성 완료</li>
                <li>wrangler.jsonc에 database_id 설정</li>
                <li>마이그레이션 실행 (로컬 + 리모트)</li>
                <li>시드 데이터 적용</li>
                <li>환경 변수 설정 (GEMINI_API_KEY)</li>
                <li>빌드 성공 확인</li>
                <li>배포 성공 확인</li>
                <li>프로덕션 테스트</li>
            </ul>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">8.2 업데이트 배포</h3>
            <pre># 1. 변경사항 빌드
npm run build

# 2. Git 커밋
git add .
git commit -m "feat: 기능 설명"

# 3. 배포
npx wrangler pages deploy dist --project-name app-name

# 4. 프로덕션 테스트
curl https://app-name.pages.dev/api/admin/stats</pre>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">8.3 DB 스키마 변경 시</h3>
            <pre># 1. 마이그레이션 파일 생성
# migrations/0003_new_feature.sql

# 2. 로컬 테스트
npx wrangler d1 migrations apply app-db --local

# 3. 프로덕션 적용
npx wrangler d1 migrations apply app-db --remote

# 4. 코드 배포
npm run build
npx wrangler pages deploy dist --project-name app-name</pre>
        </section>

        <!-- 섹션 9: 테스트 체크리스트 -->
        <section id="section-9" class="mb-12 page-break">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 pb-2 border-b-2 border-purple-600">
                <i class="fas fa-check-double mr-2 text-purple-600"></i>9. 테스트 체크리스트
            </h2>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">9.1 기능 테스트</h3>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">수강생 기능</h4>
            <ul class="checklist space-y-1 text-gray-600 ml-4">
                <li>홈페이지 정상 로드</li>
                <li>업무 입력 폼 표시</li>
                <li>필수 필드 유효성 검사</li>
                <li>업무 제출 성공</li>
                <li>AI 분석 결과 표시</li>
                <li>보고서 페이지 로드</li>
                <li>PDF 다운로드</li>
            </ul>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">관리자 기능</h4>
            <ul class="checklist space-y-1 text-gray-600 ml-4">
                <li>로그인 페이지 표시</li>
                <li>올바른 비밀번호로 로그인</li>
                <li>대시보드 통계 표시</li>
                <li>차트 렌더링</li>
                <li>업무 목록 표시</li>
                <li>상태별 필터링</li>
                <li>코멘트 모달 열기</li>
                <li>코멘트 저장</li>
                <li class="text-red-600 font-bold">삭제 버튼 표시 ⚠️</li>
                <li>삭제 확인 다이얼로그</li>
                <li>휴지통 이동 성공</li>
                <li>휴지통 목록 표시</li>
                <li>복원 기능</li>
                <li>영구 삭제 기능</li>
            </ul>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">9.2 UI 테스트 (⚠️ 중요)</h3>
            <ul class="checklist space-y-1 text-gray-600 ml-4">
                <li class="text-red-600 font-bold">모든 버튼에 텍스트 레이블 있음</li>
                <li class="text-red-600 font-bold">삭제 버튼 빨간색 배경</li>
                <li class="text-red-600 font-bold">삭제 버튼에 "삭제" 텍스트 표시</li>
                <li>hover 효과 작동</li>
                <li>버튼 크기 일관성</li>
            </ul>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">9.3 API 테스트</h3>
            <pre># 업무 등록
curl -X POST https://app.pages.dev/api/tasks \
  -H "Content-Type: application/json" \
  -d '{"organization":"테스트","department":"개발팀",...}'

# 통계 조회
curl https://app.pages.dev/api/admin/stats

# 휴지통 조회
curl https://app.pages.dev/api/admin/trash

# 삭제
curl -X DELETE https://app.pages.dev/api/tasks/{id}

# 복원
curl -X POST https://app.pages.dev/api/tasks/{id}/restore</pre>
        </section>

        <!-- 섹션 10: 트러블슈팅 -->
        <section id="section-10" class="mb-12 page-break">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 pb-2 border-b-2 border-purple-600">
                <i class="fas fa-bug mr-2 text-purple-600"></i>10. 트러블슈팅 가이드
            </h2>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">10.1 흔한 문제 및 해결책</h3>

            <div class="space-y-6">
                <div class="border-l-4 border-red-500 pl-4">
                    <h4 class="font-semibold text-gray-700">버튼/아이콘이 보이지 않음</h4>
                    <p class="text-gray-600"><strong>원인:</strong> 아이콘만 사용하고 텍스트 없음, 또는 빌드 캐시</p>
                    <p class="text-gray-600"><strong>해결:</strong></p>
                    <ol class="list-decimal list-inside ml-4 text-gray-600">
                        <li>버튼에 텍스트 레이블 추가</li>
                        <li>강력 새로고침 (Ctrl+Shift+R)</li>
                        <li>시크릿 모드에서 테스트</li>
                    </ol>
                </div>

                <div class="border-l-4 border-red-500 pl-4">
                    <h4 class="font-semibold text-gray-700">삭제 기능이 작동하지 않음</h4>
                    <p class="text-gray-600"><strong>원인:</strong> deleted_at 컬럼 없음, 또는 API 라우트 누락</p>
                    <p class="text-gray-600"><strong>해결:</strong></p>
                    <ol class="list-decimal list-inside ml-4 text-gray-600">
                        <li>마이그레이션으로 deleted_at 컬럼 추가</li>
                        <li>DELETE /api/tasks/:id 라우트 확인</li>
                        <li>프론트엔드 deleteTask 함수 확인</li>
                    </ol>
                </div>

                <div class="border-l-4 border-yellow-500 pl-4">
                    <h4 class="font-semibold text-gray-700">통계에 삭제된 항목 포함됨</h4>
                    <p class="text-gray-600"><strong>원인:</strong> 쿼리에 deleted_at IS NULL 조건 누락</p>
                    <p class="text-gray-600"><strong>해결:</strong> 모든 통계/목록 쿼리에 조건 추가</p>
                    <pre class="mt-2">WHERE deleted_at IS NULL</pre>
                </div>

                <div class="border-l-4 border-yellow-500 pl-4">
                    <h4 class="font-semibold text-gray-700">배포 후 변경사항 미반영</h4>
                    <p class="text-gray-600"><strong>원인:</strong> 브라우저 캐시</p>
                    <p class="text-gray-600"><strong>해결:</strong></p>
                    <ol class="list-decimal list-inside ml-4 text-gray-600">
                        <li>새 배포 URL로 직접 접속</li>
                        <li>강력 새로고침 (Ctrl+Shift+R)</li>
                        <li>시크릿 모드 사용</li>
                    </ol>
                </div>
            </div>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">10.2 디버깅 팁</h3>
            <pre># 로컬 개발 시 로그 확인
pm2 logs --nostream

# 빌드 파일 확인
grep "특정문자열" dist/_worker.js

# 프로덕션 디버깅
curl -s https://app.pages.dev/coach | grep "deleteTask"

# API 응답 확인
curl -s https://app.pages.dev/api/admin/stats | jq</pre>
        </section>

        <!-- 섹션 11: 유지보수 -->
        <section id="section-11" class="mb-12 page-break">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 pb-2 border-b-2 border-purple-600">
                <i class="fas fa-wrench mr-2 text-purple-600"></i>11. 유지보수 가이드
            </h2>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">11.1 정기 작업</h3>
            
            <h4 class="font-semibold text-gray-600 mt-4 mb-2">매주</h4>
            <ul class="checklist space-y-1 text-gray-600 ml-4">
                <li>휴지통 정리 (30일 지난 항목)</li>
                <li>통계 확인</li>
            </ul>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">매월</h4>
            <ul class="checklist space-y-1 text-gray-600 ml-4">
                <li>데이터베이스 백업</li>
                <li>시드 데이터 업데이트 (새 AI 도구 추가)</li>
                <li>의존성 업데이트 검토</li>
            </ul>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">11.2 기능 추가 시 체크리스트</h3>
            <ul class="checklist space-y-1 text-gray-600 ml-4">
                <li>데이터베이스 스키마 변경 필요 여부</li>
                <li>새 API 엔드포인트 필요 여부</li>
                <li>UI 변경 범위 확인</li>
                <li>기존 기능 영향도 분석</li>
                <li>테스트 케이스 추가</li>
                <li>문서 업데이트</li>
            </ul>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">11.3 백업 절차</h3>
            <pre># D1 데이터 백업 (CSV 내보내기)
curl https://app.pages.dev/api/export/tasks > backup_$(date +%Y%m%d).csv

# 코드 백업
git push origin main</pre>
        </section>

        <!-- 섹션 12: 부록 -->
        <section id="section-12" class="mb-12 page-break">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 pb-2 border-b-2 border-purple-600">
                <i class="fas fa-code mr-2 text-purple-600"></i>부록: 코드 스니펫
            </h2>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">A. 소프트 삭제 구현 패턴</h3>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">API 라우트</h4>
            <pre>// 소프트 삭제
app.delete('/api/tasks/:id', async (c) => {
  const taskId = c.req.param('id');
  const now = Date.now();
  
  await c.env.DB.prepare(
    'UPDATE tasks SET deleted_at = ?, updated_at = ? WHERE id = ? AND deleted_at IS NULL'
  ).bind(now, now, taskId).run();
  
  return c.json({ success: true, message: '휴지통으로 이동되었습니다.' });
});

// 복원
app.post('/api/tasks/:id/restore', async (c) => {
  const taskId = c.req.param('id');
  const now = Date.now();
  
  await c.env.DB.prepare(
    'UPDATE tasks SET deleted_at = NULL, updated_at = ? WHERE id = ?'
  ).bind(now, taskId).run();
  
  return c.json({ success: true, message: '복원되었습니다.' });
});</pre>

            <h4 class="font-semibold text-gray-600 mt-4 mb-2">프론트엔드</h4>
            <pre>// 삭제 함수
async function deleteTask(taskId, taskName) {
  if (!confirm(`"${taskName}" 님의 업무를 휴지통으로 이동하시겠습니까?`)) {
    return;
  }
  
  const response = await fetch(`/api/tasks/${taskId}`, { method: 'DELETE' });
  const result = await response.json();
  
  if (result.success) {
    alert('휴지통으로 이동되었습니다.');
    loadDashboard();
  }
}

// 삭제 버튼 (⚠️ 반드시 텍스트 포함!)
`&lt;button onclick="deleteTask('${task.id}', '${task.name}')" 
   class="px-3 py-1 text-sm bg-red-100 text-red-600 rounded hover:bg-red-200"&gt;
  &lt;i class="fas fa-trash-alt mr-1"&gt;&lt;/i&gt;삭제
&lt;/button&gt;`</pre>

            <h3 class="text-lg font-semibold text-gray-700 mt-6 mb-3">B. 통계 쿼리 패턴</h3>
            <pre>-- 전체 통계 (삭제된 항목 제외)
SELECT COUNT(*) FROM tasks WHERE deleted_at IS NULL;

-- 휴지통 통계
SELECT COUNT(*) FROM tasks WHERE deleted_at IS NOT NULL;

-- 카테고리별 통계 (삭제된 항목 제외)
SELECT task_category, COUNT(*) 
FROM tasks 
WHERE deleted_at IS NULL 
GROUP BY task_category;</pre>
        </section>

        <!-- 최종 점검 체크리스트 -->
        <section class="mb-12 page-break">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 pb-2 border-b-2 border-red-600">
                <i class="fas fa-clipboard-list mr-2 text-red-600"></i>최종 점검 체크리스트
            </h2>

            <div class="warning-box">
                <strong><i class="fas fa-exclamation-triangle mr-2"></i>개발 완료 전 필수 확인!</strong>
                <p class="mt-2">아래 항목을 모두 확인한 후에만 프로덕션 배포를 진행하세요.</p>
            </div>

            <div class="grid md:grid-cols-2 gap-6 mt-6">
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-gray-700 mb-3"><i class="fas fa-database mr-2 text-blue-600"></i>데이터베이스</h4>
                    <ul class="checklist space-y-1 text-gray-600 text-sm">
                        <li>모든 테이블에 deleted_at 컬럼 있음</li>
                        <li>deleted_at 인덱스 생성됨</li>
                        <li>모든 조회 쿼리에 deleted_at IS NULL 조건 있음</li>
                    </ul>
                </div>

                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-gray-700 mb-3"><i class="fas fa-plug mr-2 text-green-600"></i>API</h4>
                    <ul class="checklist space-y-1 text-gray-600 text-sm">
                        <li>DELETE /api/tasks/:id 라우트 있음</li>
                        <li>POST /api/tasks/:id/restore 라우트 있음</li>
                        <li>DELETE /api/tasks/:id/permanent 라우트 있음</li>
                        <li>GET /api/admin/trash 라우트 있음</li>
                        <li>통계 API에 휴지통 카운트 포함</li>
                    </ul>
                </div>

                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-gray-700 mb-3"><i class="fas fa-palette mr-2 text-purple-600"></i>UI</h4>
                    <ul class="checklist space-y-1 text-gray-600 text-sm">
                        <li class="text-red-600 font-bold">삭제 버튼에 "삭제" 텍스트 포함</li>
                        <li class="text-red-600 font-bold">삭제 버튼 빨간색 스타일 적용</li>
                        <li>휴지통 통계 카드 있음</li>
                        <li>휴지통 보기 기능 있음</li>
                        <li>복원/영구삭제 버튼 있음</li>
                    </ul>
                </div>

                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-gray-700 mb-3"><i class="fas fa-vial mr-2 text-orange-600"></i>테스트</h4>
                    <ul class="checklist space-y-1 text-gray-600 text-sm">
                        <li>삭제 → 휴지통 이동 확인</li>
                        <li>휴지통에서 복원 확인</li>
                        <li>영구 삭제 확인</li>
                        <li>통계에서 삭제된 항목 제외 확인</li>
                        <li>목록에서 삭제된 항목 제외 확인</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- 푸터 -->
        <footer class="text-center pt-8 border-t border-gray-200 text-gray-500 text-sm">
            <p><strong>문서 버전:</strong> 1.0</p>
            <p><strong>최종 수정일:</strong> 2026-01-18</p>
            <p><strong>작성:</strong> AI 코칭 가이드 개발팀</p>
            <p class="mt-4">© 2026 AI공부방 10기. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // 인쇄 시 자동으로 PDF 저장 다이얼로그 표시
        document.querySelector('button').addEventListener('click', () => {
            // Chrome에서 PDF로 저장하도록 안내
            alert('PDF로 저장하려면:\\n1. 인쇄 대화상자에서 "대상"을 "PDF로 저장"으로 선택\\n2. "저장" 버튼 클릭');
        });
    </script>
</body>
</html>
